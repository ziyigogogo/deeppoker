---
description: "版本管理规范：使用 uv version 命令管理版本，禁止手动修改版本号"
alwaysApply: true
---

# 版本管理规范

## 禁止手动修改版本号

- **禁止** 直接修改 `pyproject.toml` 中的 `version` 字段
- **禁止** 直接修改 `__init__.py` 中的 `__version__` 变量
- `__version__` 已配置为从 `importlib.metadata` 动态获取，无需手动维护

## 使用 uv version 命令

版本更新必须使用 `uv version` 命令：

```bash
# 查看当前版本
uv version

# 更新补丁版本 (0.1.0 -> 0.1.1)
uv version --bump patch

# 更新次版本 (0.1.1 -> 0.2.0)
uv version --bump minor

# 更新主版本 (0.2.0 -> 1.0.0)
uv version --bump major

# 预览变更（不实际修改）
uv version --bump patch --dry-run
```

## 发布新版本流程

```bash
# 1. 更新版本
uv version --bump patch  # 或 minor/major

# 2. 提交更改
git add pyproject.toml uv.lock
git commit -m "Bump version to $(uv version --short)"

# 3. 打 tag 并推送（触发自动发布）
git tag v$(uv version --short)
git push && git push --tags
```

GitHub Actions 会自动构建并发布到 PyPI。
